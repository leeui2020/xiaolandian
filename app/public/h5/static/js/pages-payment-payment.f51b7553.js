(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-payment-payment"],{"1b7d":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/* 自定义变量 */\n/* 字体 */.content[data-v-5197a5fa]{height:100%;padding:%?50?% %?30?%;padding-top:%?200?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.content > .caption[data-v-5197a5fa]{font-weight:600;margin-bottom:%?40?%}.content > .caption .mark[data-v-5197a5fa]{font-size:%?36?%;color:#dd524d}.content > .qrcode[data-v-5197a5fa]{width:%?300?%;height:%?300?%;background-color:rgba(0,0,0,.4);margin-bottom:%?50?%}.content > .price[data-v-5197a5fa]{font-size:%?40?%;font-size:900;margin-bottom:%?50?%}.content > .tip[data-v-5197a5fa]{font-size:%?28?%;color:#dd524d;margin-bottom:%?30?%}.content > uni-button[data-v-5197a5fa]{width:100%;font-size:%?32?%}.control[data-v-5197a5fa]{height:%?80?%;background-color:#fff;border-radius:%?10?%;margin-bottom:%?30?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:100%}.control-text[data-v-5197a5fa]{-webkit-box-flex:1;-webkit-flex:1;flex:1;width:0;text-align:center}.control-action[data-v-5197a5fa]{padding:0 %?30?%;color:#007aff}',""]),t.exports=e},"2e0b":function(t,e,n){"use strict";n.r(e);var a=n("a7d2"),i=n("a9d9");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("d3ea");var o,c=n("f0c5"),s=Object(c["a"])(i["default"],a["b"],a["c"],!1,null,"5197a5fa",null,!1,a["a"],o);e["default"]=s.exports},"9b09":function(t,e,n){"use strict";var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var i=a(n("3b8d")),r={data:function(){return{init:!1,detail:null}},filters:{priceFormatter:function(t){return"￥".concat(t/100)}},created:function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$route.query,t.next=3,this.getPaymentData(e.order,e.action);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{getPaymentData:function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e,n){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e&&n){t.next=2;break}return t.abrupt("return");case 2:return uni.showLoading({title:"正在加载"}),t.next=5,this.$http.post("/order/getPaymentData",{orderId:e,paycodeId:n});case 5:if(a=t.sent,i=a.data,uni.hideLoading(),"ok"===i.status){t.next=11;break}return uni.showToast({icon:"none",title:i.errmsg}),t.abrupt("return");case 11:this.detail=i.data,this.init=!0;case 13:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}(),confirmHandler:function(){var t=this;this.submited||uni.showModal({title:"提示",content:"你是否已经完成支付？",success:function(){var e=(0,i.default)(regeneratorRuntime.mark((function e(n){var a,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=n.confirm,a){e.next=3;break}return e.abrupt("return");case 3:return uni.showLoading({title:"正在加载"}),e.next=6,t.$http.post("/order/payFinish",{_id:t.detail.order._id,paycodeId:t.detail.paycode._id});case 6:if(i=e.sent,r=i.data,uni.hideLoading(),"ok"===r.status){e.next=12;break}return uni.showToast({icon:"none",title:r.errmsg}),e.abrupt("return");case 12:uni.showModal({title:"付款成功",content:"客服审核后将在第一时间发货，祝您购物愉快！",showCancel:!1,success:function(){t.submited=!0,uni.navigateBack()}});case 13:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}()})},copyCornet:function(){uni.setClipboardData({data:this.detail.order.cornet,success:function(){uni.showToast({title:"复制成功"})}})}}};e.default=r},a7d2:function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.init?n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticClass:"caption"},[n("v-uni-view",[t._v("请使用"),n("v-uni-text",{staticClass:"mark"},[t._v(t._s(t.detail.qrcodeTitle))])],1),n("v-uni-view",[t._v("扫描下方二维码进行支付")])],1),n("v-uni-image",{staticClass:"qrcode",attrs:{src:t.detail.qrcode,mode:"widthFix"}}),n("v-uni-view",{staticClass:"price"},[t._v(t._s(t._f("priceFormatter")(t.detail.totalFee)))]),n("v-uni-view",{staticClass:"tip"},[t._v("*付款时请备注您的单号")]),n("v-uni-view",{staticClass:"control"},[n("v-uni-view",{staticClass:"control-text"},[t._v(t._s(t.detail.order.cornet))]),n("v-uni-view",{staticClass:"control-action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.copyCornet.apply(void 0,arguments)}}},[t._v("复制")])],1),n("v-uni-view",{staticClass:"tip"},[t._v("*请在支付后点击下方按钮")]),n("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmHandler.apply(void 0,arguments)}}},[t._v("我已支付，请检查")])],1):t._e()},r=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}))},a9d9:function(t,e,n){"use strict";n.r(e);var a=n("9b09"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},b471:function(t,e,n){var a=n("1b7d");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("49077eba",a,!0,{sourceMap:!1,shadowMode:!1})},d3ea:function(t,e,n){"use strict";var a=n("b471"),i=n.n(a);i.a}}]);