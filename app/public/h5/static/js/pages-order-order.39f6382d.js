(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-order"],{"0313":function(t,e,n){"use strict";n.r(e);var i=n("9cab"),a=n("94d9");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("daa1");var o,s=n("f0c5"),u=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"b3f89d04",null,!1,i["a"],o);e["default"]=u.exports},"0fe3":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/* 自定义变量 */\n/* 字体 */.card[data-v-453e4b86]{padding:%?30?%;background-color:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.card-icon[data-v-453e4b86]{width:%?80?%;height:%?80?%;border-radius:50%;background-color:grey;color:#fff;line-height:%?80?%;text-align:center;margin-right:%?20?%}.card-content[data-v-453e4b86]{-webkit-box-flex:1;-webkit-flex:1;flex:1;width:0}.card-row[data-v-453e4b86]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end;margin-bottom:%?10?%}.card-row > .name[data-v-453e4b86]{font-size:%?36?%}.card-row > .phone[data-v-453e4b86]{font-size:%?28?%;color:#999}.card-row > .brand[data-v-453e4b86]{font-size:%?24?%;color:#007aff;background-color:#99caff;padding:%?10?% %?10?%;border-radius:%?8?%}.card-row > uni-text + uni-text[data-v-453e4b86]{margin-left:%?20?%}.card-address[data-v-453e4b86]{font-size:%?28?%}.card-address > uni-text + uni-text[data-v-453e4b86]{margin-left:%?20?%}.card > .action[data-v-453e4b86]{margin-left:%?20?%}',""]),t.exports=e},"161e":function(t,e,n){var i=n("0fe3");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("a7003f50",i,!0,{sourceMap:!1,shadowMode:!1})},1627:function(t,e,n){"use strict";var i={"uni-icons":n("2575").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"card",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectHandler.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"card-icon"},[n("v-uni-text",[t._v(t._s(t._f("iconFormatter")(t.name)))])],1),n("v-uni-view",{staticClass:"card-content"},[n("v-uni-view",{staticClass:"card-row"},[n("v-uni-text",{staticClass:"name"},[t._v(t._s(t.name))]),n("v-uni-text",{staticClass:"phone"},[t._v(t._s(t.phone))]),t.isDefault?n("v-uni-text",{staticClass:"brand"},[t._v("默认")]):t._e()],1),n("v-uni-view",{staticClass:"card-address"},[n("v-uni-text",[t._v(t._s(t._f("addressFormat")(t.city)))]),n("v-uni-text",[t._v(t._s(t.address))])],1)],1),t.hideEdit?t._e():n("v-uni-view",{staticClass:"action",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.editBtnHandler.apply(void 0,arguments)}}},[n("uni-icons",{attrs:{type:"compose"}})],1)],1)},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},"26f4":function(t,e,n){"use strict";n("a9e3"),n("ac1f"),n("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"UniNumberBox",props:{value:{type:[Number,String],default:1},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},disabled:{type:Boolean,default:!1}},data:function(){return{inputValue:0}},watch:{value:function(t){this.inputValue=+t},inputValue:function(t,e){+t!==+e&&this.$emit("change",t)}},created:function(){this.inputValue=+this.value},methods:{_calcValue:function(t){if(!this.disabled){var e=this._getDecimalScale(),n=this.inputValue*e,i=this.step*e;if("minus"===t){if(n-=i,n<this.min)return;n>this.max&&(n=this.max)}else if("plus"===t){if(n+=i,n>this.max)return;n<this.min&&(n=this.min)}this.inputValue=String(n/e)}},_getDecimalScale:function(){var t=1;return~~this.step!==this.step&&(t=Math.pow(10,(this.step+"").split(".")[1].length)),t},_onBlur:function(t){var e=t.detail.value;e&&(e=+e,e>this.max?e=this.max:e<this.min&&(e=this.min),this.inputValue=e)}}};e.default=i},"3cf6":function(t,e,n){"use strict";n.r(e);var i=n("df14"),a=n("b18b");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("6130");var o,s=n("f0c5"),u=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"10af6167",null,!1,i["a"],o);e["default"]=u.exports},"4c35":function(t,e,n){"use strict";n("a15b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{name:String,phone:String,isDefault:Boolean,city:Array,address:String,hideEdit:{type:Boolean,default:!1}},filters:{iconFormatter:function(t){return t[0]},addressFormat:function(t){return t.join(" ")}},methods:{selectHandler:function(){this.$emit("click")},editBtnHandler:function(){this.$emit("edit")}}};e.default=i},5111:function(t,e,n){"use strict";var i=n("161e"),a=n.n(i);a.a},"5c11":function(t,e,n){"use strict";n.r(e);var i=n("26f4"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},6130:function(t,e,n){"use strict";var i=n("c09b"),a=n.n(i);a.a},"6cd4":function(t,e,n){"use strict";n.r(e);var i=n("4c35"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"88cf":function(t,e,n){var i=n("d4f8");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("275fbf82",i,!0,{sourceMap:!1,shadowMode:!1})},"94d9":function(t,e,n){"use strict";n.r(e);var i=n("d79e"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"9cab":function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticClass:"content-list"},t._l(t.address,(function(e,i){return n("lee-address-card",{key:i,staticClass:"content-item",attrs:{name:e.name,phone:e.phone,isDefault:e.isDefault,city:e.city,address:e.address},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.selectHandler(e)},edit:function(n){arguments[0]=n=t.$handleEvent(n),t.gotoEditAddressPage(e)}}})})),1),n("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.gotoAddAddressPage.apply(void 0,arguments)}}},[t._v("添加新地址")])],1)},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},a4ee:function(t,e,n){"use strict";n.r(e);var i=n("1627"),a=n("6cd4");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("5111");var o,s=n("f0c5"),u=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"453e4b86",null,!1,i["a"],o);e["default"]=u.exports},b026:function(t,e,n){"use strict";n.r(e);var i=n("c417"),a=n("5c11");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("dcc3");var o,s=n("f0c5"),u=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"1076947c",null,!1,i["a"],o);e["default"]=u.exports},b18b:function(t,e,n){"use strict";n.r(e);var i=n("e1ec"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},c09b:function(t,e,n){var i=n("eb57");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("ff7f81f8",i,!0,{sourceMap:!1,shadowMode:!1})},c417:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"uni-numbox"},[n("v-uni-view",{staticClass:"uni-numbox__minus",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._calcValue("minus")}}},[n("v-uni-text",{staticClass:"uni-numbox--text",class:{"uni-numbox--disabled":t.inputValue<=t.min||t.disabled}},[t._v("-")])],1),n("v-uni-input",{staticClass:"uni-numbox__value",attrs:{disabled:t.disabled,type:"number"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t._onBlur.apply(void 0,arguments)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}),n("v-uni-view",{staticClass:"uni-numbox__plus",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._calcValue("plus")}}},[n("v-uni-text",{staticClass:"uni-numbox--text",class:{"uni-numbox--disabled":t.inputValue>=t.max||t.disabled}},[t._v("+")])],1)],1)},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},d4f8:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/* 自定义变量 */\n/* 字体 */.content-list[data-v-b3f89d04]{margin-bottom:%?30?%}',""]),t.exports=e},d79e:function(t,e,n){"use strict";var i=n("ee27");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var a=i(n("c964")),r=i(n("f3f3")),o=n("2f62"),s=i(n("a4ee")),u={components:{LeeAddressCard:s.default},data:function(){return{}},computed:(0,r.default)({},(0,o.mapState)(["address"])),created:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getAddress();case 2:case"end":return e.stop()}}),e)})))()},methods:(0,r.default)({gotoAddAddressPage:function(){uni.navigateTo({url:"/pages/addaddress/addaddress"})},gotoEditAddressPage:function(t){uni.navigateTo({url:"/pages/editaddress/editaddress?_id=".concat(t._id)})},selectHandler:function(t){this.$emit("select",t)}},(0,o.mapActions)(["getAddress"]))};e.default=u},daa1:function(t,e,n){"use strict";var i=n("88cf"),a=n.n(i);a.a},dcc3:function(t,e,n){"use strict";var i=n("fa64"),a=n.n(i);a.a},df14:function(t,e,n){"use strict";var i={"uni-list":n("2b9e").default,"uni-list-item":n("4497").default,"uni-number-box":n("b026").default,"uni-popup":n("a7d9").default,"lee-address":n("0313").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.init?n("v-uni-view",[n("uni-list",[n("uni-list-item",{attrs:{title:t.goods.name,thumb:t.goods.thumbnail.src,showArrow:!1}}),n("uni-list-item",{attrs:{title:"单价",rightText:t._f("priceFormatter")(t.goods.price),showArrow:!1}}),n("uni-list-item",{attrs:{title:"数量",showArrow:!1}},[n("uni-number-box",{attrs:{slot:"right",value:t.count,min:1},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.countChangeHandler.apply(void 0,arguments)}},slot:"right"})],1),n("uni-list-item",{attrs:{title:"收货地址"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openAddressPopup.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"address-content",attrs:{slot:"right"},slot:"right"},[t.address?n("v-uni-text",[t._v(t._s(t._f("addressFormatter")(t.address)))]):n("v-uni-text",{staticClass:"tip"},[t._v("选择收货地址")])],1)],1)],1),n("v-uni-view",{staticClass:"bar"},[n("v-uni-text",[t._v("合计：")]),n("v-uni-text",{staticClass:"price"},[t._v(t._s(t._f("priceFormatter")(t.totalFee)))]),n("v-uni-button",{staticClass:"action",attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submitHandler.apply(void 0,arguments)}}},[t._v("结算")])],1),n("uni-popup",{ref:"popup",attrs:{type:"bottom"}},[n("v-uni-view",{staticClass:"popup-content"},[n("v-uni-view",{staticClass:"caption"},[t._v("收货地址")]),n("lee-address",{attrs:{showEdit:!0},on:{select:function(e){arguments[0]=e=t.$handleEvent(e),t.selectAddressHandler.apply(void 0,arguments)}}})],1)],1)],1):t._e()},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},e1ec:function(t,e,n){"use strict";var i=n("ee27");n("99af"),n("a15b"),n("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var a=i(n("c964")),r={data:function(){return{init:!1,goods:null,count:1,address:null,confirm:!1}},computed:{totalFee:function(){return this.goods?this.goods.price*this.count:0}},filters:{priceFormatter:function(t){return"￥".concat(t/100)},addressFormatter:function(t){return t.city.concat(t.address).join(" ")}},created:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getGoodsDetail(t.$route.query.id);case 2:case"end":return e.stop()}}),e)})))()},methods:{getGoodsDetail:function(t){var e=this;return(0,a.default)(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return uni.showLoading({title:"正在加载"}),n.next=5,e.$http.post("/product/detail",{_id:t});case 5:i=n.sent,a=i.data,uni.hideLoading(),"ok"===a.status&&(e.goods=a.data,e.init=!0);case 9:case"end":return n.stop()}}),n)})))()},countChangeHandler:function(t){this.count=Number(t)},openAddressPopup:function(){this.$refs.popup.open()},selectAddressHandler:function(t){this.address=t,this.$refs.popup.close()},submitHandler:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){var n,i,a,r,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.confirm){e.next=2;break}return e.abrupt("return");case 2:if(n=t.goods,i=t.count,a=t.address,r=function(t){return uni.showToast({icon:"none",title:t})},n){e.next=6;break}return e.abrupt("return",r("请选择商品"));case 6:if(a){e.next=8;break}return e.abrupt("return",r("请选择收货地址"));case 8:return uni.showLoading({title:"正在提交"}),e.next=11,t.$http.post("/order/create",{count:i,productId:n._id,addressId:a._id});case 11:if(o=e.sent,s=o.data,uni.hideLoading(),"ok"===s.status){e.next=16;break}return e.abrupt("return",r(s.errmsg));case 16:return t.confirm=!0,e.next=19,t.$utils.gotoPayment(s.data._id);case 19:case"end":return e.stop()}}),e)})))()}}};e.default=r},eb57:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/* 自定义变量 */\n/* 字体 */.uni-numbox[data-v-10af6167]{width:auto}.tip[data-v-10af6167]{font-size:%?28?%;color:#999}.bar[data-v-10af6167]{left:0;bottom:0;width:100%;height:%?120?%;position:fixed;background-color:#fff;border-top:%?2?% solid #c8c7cc;box-sizing:border-box;padding:0 %?30?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.bar > .price[data-v-10af6167]{color:#f40;font-weight:600;font-size:%?40?%}.bar > .action[data-v-10af6167]{display:inline-block;margin:0;margin-left:%?30?%}.address-content[data-v-10af6167]{max-width:%?350?%}',""]),t.exports=e},f98e:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/* 自定义变量 */\n/* 字体 */.uni-numbox[data-v-1076947c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;height:35px;line-height:35px;width:120px}.uni-numbox__value[data-v-1076947c]{background-color:#fff;width:40px;height:35px;text-align:center;font-size:%?32?%;border-width:%?1?%;border-style:solid;border-color:#c8c7cc;border-left-width:0;border-right-width:0}.uni-numbox__minus[data-v-1076947c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;width:35px;height:35px;font-size:20px;color:#333;background-color:#f2f2f2;border-width:%?1?%;border-style:solid;border-color:#c8c7cc;border-top-left-radius:%?6?%;border-bottom-left-radius:%?6?%;border-right-width:0}.uni-numbox__plus[data-v-1076947c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;width:35px;height:35px;border-width:%?1?%;border-style:solid;border-color:#c8c7cc;border-top-right-radius:%?6?%;border-bottom-right-radius:%?6?%;background-color:#f2f2f2;border-left-width:0}.uni-numbox--text[data-v-1076947c]{font-size:%?40?%;color:#333}.uni-numbox--disabled[data-v-1076947c]{color:silver}',""]),t.exports=e},fa64:function(t,e,n){var i=n("f98e");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("49e99dc1",i,!0,{sourceMap:!1,shadowMode:!1})}}]);