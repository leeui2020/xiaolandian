(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-payment-payment"],{"0c70":function(t,e,n){"use strict";n.r(e);var i=n("a3b1"),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=r.a},"156f":function(t,e,n){"use strict";var i=n("c872"),r=n.n(i);r.a},"43dc":function(t,e,n){"use strict";var i,r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.init?n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticClass:"caption"},[n("v-uni-view",[t._v("请使用"),n("v-uni-text",{staticClass:"mark"},[t._v(t._s(t.detail.qrcodeTitle))])],1),n("v-uni-view",[t._v("扫描下方二维码进行支付")])],1),n("v-uni-image",{staticClass:"qrcode",attrs:{src:t.detail.qrcode,mode:"widthFix"}}),n("v-uni-view",{staticClass:"price"},[t._v(t._s(t._f("priceFormatter")(t.detail.totalFee)))]),n("v-uni-view",{staticClass:"tip"},[t._v("*付款时请备注您的单号")]),n("v-uni-view",{staticClass:"control"},[n("v-uni-view",{staticClass:"control-text"},[t._v(t._s(t.detail.order.cornet))]),n("v-uni-view",{staticClass:"control-action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.copyCornet.apply(void 0,arguments)}}},[t._v("复制")])],1),n("v-uni-view",{staticClass:"tip"},[t._v("*请在支付后点击下方按钮")]),n("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmHandler.apply(void 0,arguments)}}},[t._v("我已支付，请检查")])],1):t._e()},a=[];n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}))},"61d0":function(t,e,n){"use strict";n.r(e);var i=n("43dc"),r=n("0c70");for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);n("156f");var o,c=n("f0c5"),s=Object(c["a"])(r["default"],i["b"],i["c"],!1,null,"310831bc",null,!1,i["a"],o);e["default"]=s.exports},a3b1:function(t,e,n){"use strict";var i=n("ee27");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var r=i(n("c964")),a={data:function(){return{init:!1,detail:null}},filters:{priceFormatter:function(t){return"￥".concat(t/100)}},created:function(){var t=this;return(0,r.default)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$route.query,e.next=3,t.getPaymentData(n.order,n.action);case 3:case"end":return e.stop()}}),e)})))()},methods:{getPaymentData:function(t,e){var n=this;return(0,r.default)(regeneratorRuntime.mark((function i(){var r,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t&&e){i.next=2;break}return i.abrupt("return");case 2:return uni.showLoading({title:"正在加载"}),i.next=5,n.$http.post("/order/getPaymentData",{orderId:t,paycodeId:e});case 5:if(r=i.sent,a=r.data,uni.hideLoading(),"ok"===a.status){i.next=11;break}return uni.showToast({icon:"none",title:a.errmsg}),i.abrupt("return");case 11:n.detail=a.data,n.init=!0;case 13:case"end":return i.stop()}}),i)})))()},confirmHandler:function(){var t=this;this.submited||uni.showModal({title:"提示",content:"你是否已经完成支付？",success:function(){var e=(0,r.default)(regeneratorRuntime.mark((function e(n){var i,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=n.confirm,i){e.next=3;break}return e.abrupt("return");case 3:return uni.showLoading({title:"正在加载"}),e.next=6,t.$http.post("/order/payFinish",{_id:t.detail.order._id,paycodeId:t.detail.paycode._id});case 6:if(r=e.sent,a=r.data,uni.hideLoading(),"ok"===a.status){e.next=12;break}return uni.showToast({icon:"none",title:a.errmsg}),e.abrupt("return");case 12:uni.showModal({title:"付款成功",content:"客服审核后将在第一时间发货，祝您购物愉快！",showCancel:!1,success:function(){t.submited=!0,uni.redirectTo({url:"/pages/order-list/order-list?index=1"})}});case 13:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}()})},copyCornet:function(){uni.setClipboardData({data:this.detail.order.cornet,success:function(){uni.showToast({title:"复制成功"})}})}}};e.default=a},c872:function(t,e,n){var i=n("e77e");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=n("4f06").default;r("5e21e5c1",i,!0,{sourceMap:!1,shadowMode:!1})},e77e:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/* 自定义变量 */\n/* 字体 */.content[data-v-310831bc]{height:100%;padding:%?50?% %?30?%;padding-top:%?200?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.content > .caption[data-v-310831bc]{font-weight:600;margin-bottom:%?40?%}.content > .caption .mark[data-v-310831bc]{font-size:%?36?%;color:#dd524d}.content > .qrcode[data-v-310831bc]{width:%?300?%;height:%?300?%;background-color:rgba(0,0,0,.4);margin-bottom:%?50?%}.content > .price[data-v-310831bc]{font-size:%?40?%;font-size:900;margin-bottom:%?50?%}.content > .tip[data-v-310831bc]{font-size:%?28?%;color:#dd524d;margin-bottom:%?30?%}.content > uni-button[data-v-310831bc]{width:100%;font-size:%?32?%}.control[data-v-310831bc]{height:%?80?%;background-color:#fff;border-radius:%?10?%;margin-bottom:%?30?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:100%}.control-text[data-v-310831bc]{-webkit-box-flex:1;-webkit-flex:1;flex:1;width:0;text-align:center}.control-action[data-v-310831bc]{padding:0 %?30?%;color:#007aff}',""]),t.exports=e}}]);