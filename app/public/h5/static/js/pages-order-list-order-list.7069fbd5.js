(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-list-order-list"],{"0003":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("6762"),n("2fdb"),n("c5f6");var i={props:{tabs:{type:Array,required:!0},height:{type:String,default:"100vh"},defaultIndex:{type:Number,default:0}},data:function(){return{currentIndex:-1,loaded:[]}},created:function(){this.currentIndex=this.defaultIndex},methods:{selectTabsHandler:function(t){this.currentIndex=t},swiperChangeHandler:function(t){this.currentIndex=t.detail.current}},watch:{currentIndex:function(t){this.loaded.includes(t)||this.loaded.push(t)}}};e.default=i},"0a5e":function(t,e,n){"use strict";var i=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var r=i(n("3b8d"));n("c5f6");var a=i(n("c299")),o={components:{LeeOrderItem:a.default},props:{status:{type:Number,required:!0}},data:function(){return{page:1,pagesize:10,total:0,list:[]}},computed:{filter:function(){var t={timePayed:{$exists:!1},timeRefund:{$exists:!1},timeClosed:{$exists:!1},timeConsign:{$exists:!1}};return 0===this.status?t:1===this.status?(t.timePayed.$exists=!0,t):2===this.status?(t.timePayed.$exists=!0,t.timeConsign.$exists=!0,t):{}}},created:function(){this.getOrderList(1)},methods:{getOrderList:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(e,n){var i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return uni.showLoading({title:"正在加载"}),t.next=3,this.$http.post("/order/search",{page:Math.max(1,e),pagesize:this.pagesize,filter:this.filter});case 3:i=t.sent,r=i.data,uni.hideLoading(),"ok"===r.status&&(this.page=r.data.page,this.pagesize=r.data.pagesize,this.total=r.data.total,this.list=n?r.data.list:this.list.concat(r.data.list));case 7:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}(),removeOrder:function(t){var e=this;uni.showModal({title:"删除提示",content:"是否删除订单？",success:function(){var n=(0,r.default)(regeneratorRuntime.mark((function n(i){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=i.confirm,r){n.next=3;break}return n.abrupt("return");case 3:return uni.showLoading({title:"正在删除"}),n.next=6,e.$http.post("/order/remove",{_id:t._id});case 6:if(a=n.sent,o=a.data,uni.hideLoading(),"ok"===o.status){n.next=12;break}return uni.showToast({icon:"none",title:o.errmsg}),n.abrupt("return");case 12:return uni.showToast({title:"删除成功"}),n.next=15,e.getOrderList(1,!0);case 15:case"end":return n.stop()}}),n)})));function i(t){return n.apply(this,arguments)}return i}()})},cancelOrder:function(t){var e=this;uni.showModal({title:"取消提示",content:"是否取消订单？",success:function(){var n=(0,r.default)(regeneratorRuntime.mark((function n(i){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=i.confirm,r){n.next=3;break}return n.abrupt("return");case 3:return uni.showLoading({title:"正在取消"}),n.next=6,e.$http.post("/order/cancel",{_id:t._id});case 6:if(a=n.sent,o=a.data,uni.hideLoading(),"ok"===o.status){n.next=12;break}return uni.showToast({icon:"none",title:o.errmsg}),n.abrupt("return");case 12:return uni.showToast({title:"取消成功"}),n.next=15,e.getOrderList(1,!0);case 15:case"end":return n.stop()}}),n)})));function i(t){return n.apply(this,arguments)}return i}()})},payOrder:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$utils.gotoPayment(e._id);case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onScrollToLower:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(this.list.length<this.total)){t.next=3;break}return t.next=3,this.getOrderList(this.page+1);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),refreshData:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getOrderList(1,!0);case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),confirmOrder:function(t){var e=this;uni.showModal({title:"提示",content:"是否已经收到货了？",success:function(){var n=(0,r.default)(regeneratorRuntime.mark((function n(i){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=i.confirm,r){n.next=3;break}return n.abrupt("return");case 3:return uni.showLoading({title:"正在加载"}),n.next=6,e.$http.post("/order/confirm",{_id:t._id});case 6:if(a=n.sent,o=a.data,uni.hideLoading(),"ok"===o.status){n.next=12;break}return uni.showToast({icon:"none",title:o.errmsg}),n.abrupt("return");case 12:return uni.showToast({title:"收货完成"}),n.next=15,e.getOrderList(1,!0);case 15:case"end":return n.stop()}}),n)})));function i(t){return n.apply(this,arguments)}return i}()})}}};e.default=o},"0e63":function(t,e,n){"use strict";n.r(e);var i=n("0003"),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=r.a},1382:function(t,e,n){"use strict";n.r(e);var i=n("78fe"),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=r.a},1640:function(t,e,n){"use strict";var i=n("21de"),r=n.n(i);r.a},"1b61":function(t,e,n){"use strict";n.r(e);var i=n("7121"),r=n("0e63");for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);n("1640");var o,s=n("f0c5"),c=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"18563ca0",null,!1,i["a"],o);e["default"]=c.exports},"1ea0":function(t,e,n){"use strict";n.r(e);var i=n("d14b"),r=n("430d");for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);var o,s=n("f0c5"),c=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"ce0e2a8c",null,!1,i["a"],o);e["default"]=c.exports},"20af":function(t,e,n){"use strict";var i=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var r=i(n("3b8d")),a=i(n("1b61")),o=i(n("da77")),s={components:{LeeTabs:a.default,LeeOrderCenter:o.default},data:function(){return{tabs:["待支付","待发货","已发货","全部"]}},onPullDownRefresh:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.$refs.tabs.currentIndex,n=this.$refs["content".concat(e)],n){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,n.refreshData();case 6:uni.stopPullDownRefresh();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()};e.default=s},"21de":function(t,e,n){var i=n("7c73");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=n("4f06").default;r("939939cc",i,!0,{sourceMap:!1,shadowMode:!1})},3040:function(t,e,n){"use strict";var i=n("5c9f"),r=n.n(i);r.a},"3a29":function(t,e,n){"use strict";n.r(e);var i=n("0a5e"),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=r.a},"418c":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/* 自定义变量 */\n/* 字体 */.defaults[data-v-f7a3ec3a]{height:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;color:#999}.defaults-icon[data-v-f7a3ec3a]{margin-bottom:%?30?%}.list[data-v-f7a3ec3a]{padding:%?30?%;position:relative}.list-item + .list-item[data-v-f7a3ec3a]{margin-top:%?30?%}',""]),t.exports=e},"430d":function(t,e,n){"use strict";n.r(e);var i=n("20af"),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=r.a},"56ca":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/* 自定义变量 */\n/* 字体 */.order[data-v-95e8620e]{border-radius:%?10?%;background-color:#fff;box-shadow:0 0 %?2?% rgba(0,0,0,.15);overflow:hidden}.order-content[data-v-95e8620e]{padding:%?20?%}.order-footer[data-v-95e8620e]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.order-product[data-v-95e8620e]{height:%?160?%;display:-webkit-box;display:-webkit-flex;display:flex;background-color:#e5e5e5}.order-product-image[data-v-95e8620e]{width:%?160?%;height:%?160?%;margin-right:%?20?%}.order-product-info[data-v-95e8620e]{-webkit-box-flex:1;-webkit-flex:1;flex:1;width:0;height:%?160?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;box-sizing:border-box;padding:%?10?%}.order-product-title[data-v-95e8620e]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}.order-product-footer[data-v-95e8620e]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.order-price[data-v-95e8620e]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;font-size:%?28?%;margin-bottom:%?30?%}.order-price-mark[data-v-95e8620e]{font-size:%?32?%;font-weight:600;color:#f40}.order-options[data-v-95e8620e]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?28?%}.order-options-item[data-v-95e8620e]{height:%?60?%;line-height:%?60?%;text-align:center;padding:0 %?30?%;border-radius:%?60?%;border:%?2?% solid #666;color:#666;white-space:nowrap}.order-options-item[data-v-95e8620e]:not(:last-child){margin-right:%?20?%}.order-options-item.primary[data-v-95e8620e]{border-color:#007aff;color:#007aff}',""]),t.exports=e},"5c9f":function(t,e,n){var i=n("56ca");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=n("4f06").default;r("7c399681",i,!0,{sourceMap:!1,shadowMode:!1})},"6c84":function(t,e,n){"use strict";var i={"uni-icons":n("5056").default},r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return 0===t.list.length?n("v-uni-view",{staticClass:"defaults"},[n("v-uni-view",{staticClass:"defaults-icon"},[n("uni-icons",{attrs:{type:"cart-filled",color:"#999",size:50}})],1),n("v-uni-view",{staticClass:"defaults-title"},[t._v("暂无数据")])],1):n("v-uni-scroll-view",{staticStyle:{height:"100%"},attrs:{"scroll-y":"true"},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.onScrollToLower.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"list"},t._l(t.list,(function(e,i){return n("lee-order-item",{key:i,staticClass:"list-item",attrs:{item:e},on:{remove:function(n){arguments[0]=n=t.$handleEvent(n),t.removeOrder(e)},cancel:function(n){arguments[0]=n=t.$handleEvent(n),t.cancelOrder(e)},pay:function(n){arguments[0]=n=t.$handleEvent(n),t.payOrder(e)},confirm:function(n){arguments[0]=n=t.$handleEvent(n),t.confirmOrder(e)}}})})),1),t.total===t.list.length?n("v-uni-view",{staticClass:"nomore"},[t._v("- 没有更多了 -")]):t._e()],1)},a=[];n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}))},7121:function(t,e,n){"use strict";var i,r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"lee-tabs",style:{height:t.height}},[n("v-uni-scroll-view",{staticClass:"lee-tabs-column",attrs:{"scroll-x":"true"}},[n("v-uni-view",{staticClass:"lee-tabs-column-content"},[t._t("column-before"),n("v-uni-view",{staticClass:"lee-tabs-list"},t._l(t.tabs,(function(e,i){return n("v-uni-view",{key:i,staticClass:"lee-tabs-item",class:{active:t.currentIndex===i},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectTabsHandler(i)}}},[t._v(t._s(e))])})),1)],2)],1),n("v-uni-view",{staticClass:"lee-tabs-content"},[n("v-uni-swiper",{staticClass:"lee-tabs-swiper",attrs:{current:t.currentIndex},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.swiperChangeHandler.apply(void 0,arguments)}}},t._l(t.tabs,(function(e,i){return n("v-uni-swiper-item",{key:i,staticClass:"lee-tabs-swiper-item"},[t.loaded.includes(i)?t._t("content-"+i):t._e()],2)})),1)],1)],1)},a=[];n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}))},"78fe":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{item:Object},filters:{priceFormatter:function(t){return"￥".concat(t/100)}},methods:{removeBtnHandler:function(){this.$emit("remove")},cancelBtnHandler:function(){this.$emit("cancel")},payBtnHandler:function(){this.$emit("pay")},confirmHandler:function(){this.$emit("confirm")},gotoWuliuPage:function(){uni.navigateTo({url:"/pages/wuliu/wuliu?nu=".concat(this.item.nu)})}}};e.default=i},"7c73":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/* 自定义变量 */\n/* 字体 */.lee-tabs[data-v-18563ca0]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.lee-tabs-column[data-v-18563ca0]{height:%?100?%}.lee-tabs-column-content[data-v-18563ca0]{height:%?100?%;background-color:#fff;box-shadow:0 %?2?% %?2?% rgba(0,0,0,.15);display:-webkit-box;display:-webkit-flex;display:flex}.lee-tabs-list[data-v-18563ca0]{height:%?100?%;display:-webkit-box;display:-webkit-flex;display:flex}.lee-tabs-item[data-v-18563ca0]{height:%?100?%;min-width:%?140?%;line-height:%?100?%;text-align:center;position:relative}.lee-tabs-item.active[data-v-18563ca0]{color:#007aff}.lee-tabs-item.active[data-v-18563ca0]::after{content:"";left:25%;bottom:0;width:50%;height:%?6?%;border-radius:%?6?%;position:absolute;background-color:#007aff}.lee-tabs-content[data-v-18563ca0]{-webkit-box-flex:1;-webkit-flex:1;flex:1;height:0;position:relative}.lee-tabs-swiper[data-v-18563ca0]{height:100%}',""]),t.exports=e},9716:function(t,e,n){"use strict";var i,r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"order"},[n("v-uni-view",{staticClass:"order-product"},[n("v-uni-image",{staticClass:"order-product-image",attrs:{src:t.item.productSnapShot.thumbnail}}),n("v-uni-view",{staticClass:"order-product-info"},[n("v-uni-view",{staticClass:"order-product-title"},[t._v(t._s(t.item.productSnapShot.name))]),n("v-uni-view",{staticClass:"order-product-footer"},[n("v-uni-view",{staticClass:"order-product-price"},[t._v(t._s(t._f("priceFormatter")(t.item.productSnapShot.price)))]),n("v-uni-view",{staticClass:"order-product-count"},[t._v("x"+t._s(t.item.count))])],1)],1)],1),n("v-uni-view",{staticClass:"order-content"},[n("div",{staticClass:"order-price"},[t._v("总价 "+t._s(t._f("priceFormatter")(t.item.priceSum))+", 实付款"),n("v-uni-text",{staticClass:"order-price-mark"},[t._v(t._s(t._f("priceFormatter")(t.item.totalFee)))])],1),n("v-uni-view",{staticClass:"order-footer"},[n("v-uni-view",{staticClass:"order-status"},[t._v(t._s(t.item.status))]),n("v-uni-view",{staticClass:"order-options"},[t.item.timeClosed?n("v-uni-view",{staticClass:"order-options-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.removeBtnHandler.apply(void 0,arguments)}}},[t._v("删除订单")]):[t.item.timePayed?t._e():n("v-uni-view",{staticClass:"order-options-item primary",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.payBtnHandler.apply(void 0,arguments)}}},[t._v("去付款")]),t.item.timePayed?t._e():n("v-uni-view",{staticClass:"order-options-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancelBtnHandler.apply(void 0,arguments)}}},[t._v("取消订单")]),t.item.timeConsign?n("v-uni-view",{staticClass:"order-options-item primary",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmHandler.apply(void 0,arguments)}}},[t._v("确认收货")]):t._e()],t.item.nu?n("v-uni-view",{staticClass:"order-options-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.gotoWuliuPage()}}},[t._v("查看物流")]):t._e()],2)],1)],1)],1)},a=[];n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}))},c299:function(t,e,n){"use strict";n.r(e);var i=n("9716"),r=n("1382");for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);n("3040");var o,s=n("f0c5"),c=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"95e8620e",null,!1,i["a"],o);e["default"]=c.exports},cf82:function(t,e,n){"use strict";var i=n("e4bd"),r=n.n(i);r.a},d14b:function(t,e,n){"use strict";var i,r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("lee-tabs",{ref:"tabs",attrs:{tabs:t.tabs}},[n("LeeOrderCenter",{ref:"content0",attrs:{slot:"content-0",status:0},slot:"content-0"}),n("LeeOrderCenter",{ref:"content1",attrs:{slot:"content-1",status:1},slot:"content-1"}),n("LeeOrderCenter",{ref:"content2",attrs:{slot:"content-2",status:2},slot:"content-2"}),n("LeeOrderCenter",{ref:"content3",attrs:{slot:"content-3",status:3},slot:"content-3"})],1)],1)},a=[];n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}))},da77:function(t,e,n){"use strict";n.r(e);var i=n("6c84"),r=n("3a29");for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);n("cf82");var o,s=n("f0c5"),c=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"f7a3ec3a",null,!1,i["a"],o);e["default"]=c.exports},e4bd:function(t,e,n){var i=n("418c");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=n("4f06").default;r("3898c0b6",i,!0,{sourceMap:!1,shadowMode:!1})}}]);