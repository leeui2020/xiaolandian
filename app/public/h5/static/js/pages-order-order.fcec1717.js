(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-order"],{"02f9":function(t,e,n){"use strict";var i=n("8449"),r=n.n(i);r.a},"0ae3":function(t,e,n){"use strict";var i,r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"uni-numbox"},[n("v-uni-view",{staticClass:"uni-numbox__minus",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._calcValue("minus")}}},[n("v-uni-text",{staticClass:"uni-numbox--text",class:{"uni-numbox--disabled":t.inputValue<=t.min||t.disabled}},[t._v("-")])],1),n("v-uni-input",{staticClass:"uni-numbox__value",attrs:{disabled:t.disabled,type:"number"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t._onBlur.apply(void 0,arguments)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}),n("v-uni-view",{staticClass:"uni-numbox__plus",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._calcValue("plus")}}},[n("v-uni-text",{staticClass:"uni-numbox--text",class:{"uni-numbox--disabled":t.inputValue>=t.max||t.disabled}},[t._v("+")])],1)],1)},a=[];n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}))},"17b3":function(t,e,n){"use strict";var i=n("17e3"),r=n.n(i);r.a},"17e3":function(t,e,n){var i=n("b341");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=n("4f06").default;r("88d0d56e",i,!0,{sourceMap:!1,shadowMode:!1})},"188d":function(t,e,n){"use strict";n.r(e);var i=n("0ae3"),r=n("dfe0");for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);n("ead1");var o,s=n("f0c5"),u=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"2fa80344",null,!1,i["a"],o);e["default"]=u.exports},"1f73":function(t,e,n){"use strict";var i=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("8e6e"),n("ac6a"),n("456d"),n("96cf");var r=i(n("3b8d")),a=i(n("bd86")),o=n("2f62"),s=i(n("402d"));function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){(0,a.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d={components:{LeeAddressCard:s.default},data:function(){return{}},computed:c({},(0,o.mapState)(["address"])),created:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getAddress();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:c({gotoAddAddressPage:function(){uni.navigateTo({url:"/pages/addaddress/addaddress"})},gotoEditAddressPage:function(t){uni.navigateTo({url:"/pages/editaddress/editaddress?_id=".concat(t._id)})},selectHandler:function(t){this.$emit("select",t)}},(0,o.mapActions)(["getAddress"]))};e.default=d},2174:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/* 自定义变量 */\n/* 字体 */.card[data-v-f3637dc2]{padding:%?30?%;background-color:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.card-icon[data-v-f3637dc2]{width:%?80?%;height:%?80?%;border-radius:50%;background-color:grey;color:#fff;line-height:%?80?%;text-align:center;margin-right:%?20?%}.card-content[data-v-f3637dc2]{-webkit-box-flex:1;-webkit-flex:1;flex:1;width:0}.card-row[data-v-f3637dc2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end;margin-bottom:%?10?%}.card-row > .name[data-v-f3637dc2]{font-size:%?36?%}.card-row > .phone[data-v-f3637dc2]{font-size:%?28?%;color:#999}.card-row > .brand[data-v-f3637dc2]{font-size:%?24?%;color:#007aff;background-color:#99caff;padding:%?10?% %?10?%;border-radius:%?8?%}.card-row > uni-text + uni-text[data-v-f3637dc2]{margin-left:%?20?%}.card-address[data-v-f3637dc2]{font-size:%?28?%}.card-address > uni-text + uni-text[data-v-f3637dc2]{margin-left:%?20?%}.card > .action[data-v-f3637dc2]{margin-left:%?20?%}',""]),t.exports=e},3306:function(t,e,n){"use strict";var i={"uni-icons":n("5056").default},r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"card",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectHandler.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"card-icon"},[n("v-uni-text",[t._v(t._s(t._f("iconFormatter")(t.name)))])],1),n("v-uni-view",{staticClass:"card-content"},[n("v-uni-view",{staticClass:"card-row"},[n("v-uni-text",{staticClass:"name"},[t._v(t._s(t.name))]),n("v-uni-text",{staticClass:"phone"},[t._v(t._s(t.phone))]),t.isDefault?n("v-uni-text",{staticClass:"brand"},[t._v("默认")]):t._e()],1),n("v-uni-view",{staticClass:"card-address"},[n("v-uni-text",[t._v(t._s(t._f("addressFormat")(t.city)))]),n("v-uni-text",[t._v(t._s(t.address))])],1)],1),t.hideEdit?t._e():n("v-uni-view",{staticClass:"action",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.editBtnHandler.apply(void 0,arguments)}}},[n("uni-icons",{attrs:{type:"compose"}})],1)],1)},a=[];n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}))},3564:function(t,e,n){"use strict";n.r(e);var i=n("e3bc"),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=r.a},"3a36":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("28a5"),n("c5f6");var i={name:"UniNumberBox",props:{value:{type:[Number,String],default:1},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},disabled:{type:Boolean,default:!1}},data:function(){return{inputValue:0}},watch:{value:function(t){this.inputValue=+t},inputValue:function(t,e){+t!==+e&&this.$emit("change",t)}},created:function(){this.inputValue=+this.value},methods:{_calcValue:function(t){if(!this.disabled){var e=this._getDecimalScale(),n=this.inputValue*e,i=this.step*e;if("minus"===t){if(n-=i,n<this.min)return;n>this.max&&(n=this.max)}else if("plus"===t){if(n+=i,n>this.max)return;n<this.min&&(n=this.min)}this.inputValue=String(n/e)}},_getDecimalScale:function(){var t=1;return~~this.step!==this.step&&(t=Math.pow(10,(this.step+"").split(".")[1].length)),t},_onBlur:function(t){var e=t.detail.value;e&&(e=+e,e>this.max?e=this.max:e<this.min&&(e=this.min),this.inputValue=e)}}};e.default=i},"402d":function(t,e,n){"use strict";n.r(e);var i=n("3306"),r=n("f54b");for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);n("b465");var o,s=n("f0c5"),u=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"f3637dc2",null,!1,i["a"],o);e["default"]=u.exports},"5c4c":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{name:String,phone:String,isDefault:Boolean,city:Array,address:String,hideEdit:{type:Boolean,default:!1}},filters:{iconFormatter:function(t){return t[0]},addressFormat:function(t){return t.join(" ")}},methods:{selectHandler:function(){this.$emit("click")},editBtnHandler:function(){this.$emit("edit")}}};e.default=i},"6a8d":function(t,e,n){var i=n("2174");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=n("4f06").default;r("094607de",i,!0,{sourceMap:!1,shadowMode:!1})},"7c99":function(t,e,n){var i=n("d1d3");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=n("4f06").default;r("4cbb87d6",i,!0,{sourceMap:!1,shadowMode:!1})},"7d29":function(t,e,n){"use strict";n.r(e);var i=n("9c2b"),r=n("3564");for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);n("02f9");var o,s=n("f0c5"),u=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"5fb9a945",null,!1,i["a"],o);e["default"]=u.exports},8449:function(t,e,n){var i=n("b708");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=n("4f06").default;r("0a6f001a",i,!0,{sourceMap:!1,shadowMode:!1})},9451:function(t,e,n){"use strict";n.r(e);var i=n("1f73"),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=r.a},"9c2b":function(t,e,n){"use strict";var i={"uni-list":n("9cc5").default,"uni-list-item":n("e5ca").default,"uni-number-box":n("188d").default,"uni-popup":n("aa89").default,"lee-address":n("f507").default},r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.init?n("v-uni-view",[n("uni-list",[n("uni-list-item",{attrs:{title:t.goods.name,thumb:t.goods.thumbnail.src,showArrow:!1}}),n("uni-list-item",{attrs:{title:"单价",rightText:t._f("priceFormatter")(t.goods.price),showArrow:!1}}),n("uni-list-item",{attrs:{title:"数量",showArrow:!1}},[n("uni-number-box",{attrs:{slot:"right",value:t.count,min:1},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.countChangeHandler.apply(void 0,arguments)}},slot:"right"})],1),n("uni-list-item",{attrs:{title:"收货地址"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openAddressPopup.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"address-content",attrs:{slot:"right"},slot:"right"},[t.address?n("v-uni-text",[t._v(t._s(t._f("addressFormatter")(t.address)))]):n("v-uni-text",{staticClass:"tip"},[t._v("选择收货地址")])],1)],1)],1),n("v-uni-view",{staticClass:"bar"},[n("v-uni-text",[t._v("合计：")]),n("v-uni-text",{staticClass:"price"},[t._v(t._s(t._f("priceFormatter")(t.totalFee)))]),n("v-uni-button",{staticClass:"action",attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submitHandler.apply(void 0,arguments)}}},[t._v("结算")])],1),n("uni-popup",{ref:"popup",attrs:{type:"bottom"}},[n("v-uni-view",{staticClass:"popup-content"},[n("v-uni-view",{staticClass:"caption"},[t._v("收货地址")]),n("lee-address",{attrs:{showEdit:!0},on:{select:function(e){arguments[0]=e=t.$handleEvent(e),t.selectAddressHandler.apply(void 0,arguments)}}})],1)],1)],1):t._e()},a=[];n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}))},b341:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/* 自定义变量 */\n/* 字体 */.content-list[data-v-1112f3e0]{margin-bottom:%?30?%}',""]),t.exports=e},b465:function(t,e,n){"use strict";var i=n("6a8d"),r=n.n(i);r.a},b708:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/* 自定义变量 */\n/* 字体 */.uni-numbox[data-v-5fb9a945]{width:auto}.tip[data-v-5fb9a945]{font-size:%?28?%;color:#999}.bar[data-v-5fb9a945]{left:0;bottom:0;width:100%;height:%?120?%;position:fixed;background-color:#fff;border-top:%?2?% solid #c8c7cc;box-sizing:border-box;padding:0 %?30?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.bar > .price[data-v-5fb9a945]{color:#f40;font-weight:600;font-size:%?40?%}.bar > .action[data-v-5fb9a945]{display:inline-block;margin:0;margin-left:%?30?%}.address-content[data-v-5fb9a945]{max-width:%?350?%}',""]),t.exports=e},d1d3:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/* 自定义变量 */\n/* 字体 */.uni-numbox[data-v-2fa80344]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;height:35px;line-height:35px;width:120px}.uni-numbox__value[data-v-2fa80344]{background-color:#fff;width:40px;height:35px;text-align:center;font-size:%?32?%;border-width:%?1?%;border-style:solid;border-color:#c8c7cc;border-left-width:0;border-right-width:0}.uni-numbox__minus[data-v-2fa80344]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;width:35px;height:35px;font-size:20px;color:#333;background-color:#f2f2f2;border-width:%?1?%;border-style:solid;border-color:#c8c7cc;border-top-left-radius:%?6?%;border-bottom-left-radius:%?6?%;border-right-width:0}.uni-numbox__plus[data-v-2fa80344]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;width:35px;height:35px;border-width:%?1?%;border-style:solid;border-color:#c8c7cc;border-top-right-radius:%?6?%;border-bottom-right-radius:%?6?%;background-color:#f2f2f2;border-left-width:0}.uni-numbox--text[data-v-2fa80344]{font-size:%?40?%;color:#333}.uni-numbox--disabled[data-v-2fa80344]{color:silver}',""]),t.exports=e},dfe0:function(t,e,n){"use strict";n.r(e);var i=n("3a36"),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=r.a},e3bc:function(t,e,n){"use strict";var i=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("c5f6"),n("96cf");var r=i(n("3b8d")),a={data:function(){return{init:!1,goods:null,count:1,address:null,confirm:!1}},computed:{totalFee:function(){return this.goods?this.goods.price*this.count:0}},filters:{priceFormatter:function(t){return"￥".concat(t/100)},addressFormatter:function(t){return t.city.concat(t.address).join(" ")}},created:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getGoodsDetail(this.$route.query.id);case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{getGoodsDetail:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return uni.showLoading({title:"正在加载"}),t.next=5,this.$http.post("/product/detail",{_id:e});case 5:n=t.sent,i=n.data,uni.hideLoading(),"ok"===i.status&&(this.goods=i.data,this.init=!0);case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),countChangeHandler:function(t){this.count=Number(t)},openAddressPopup:function(){this.$refs.popup.open()},selectAddressHandler:function(t){this.address=t,this.$refs.popup.close()},submitHandler:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(){var e,n,i,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.confirm){t.next=2;break}return t.abrupt("return");case 2:if(e=this.goods,n=this.count,i=this.address,r=function(t){return uni.showToast({icon:"none",title:t})},e){t.next=6;break}return t.abrupt("return",r("请选择商品"));case 6:if(i){t.next=8;break}return t.abrupt("return",r("请选择收货地址"));case 8:return uni.showLoading({title:"正在提交"}),t.next=11,this.$http.post("/order/create",{count:n,productId:e._id,addressId:i._id});case 11:if(a=t.sent,o=a.data,uni.hideLoading(),"ok"===o.status){t.next=16;break}return t.abrupt("return",r(o.errmsg));case 16:return this.confirm=!0,t.next=19,this.$utils.gotoPayment(o.data._id);case 19:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}};e.default=a},ead1:function(t,e,n){"use strict";var i=n("7c99"),r=n.n(i);r.a},f335:function(t,e,n){"use strict";var i,r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticClass:"content-list"},t._l(t.address,(function(e,i){return n("lee-address-card",{key:i,staticClass:"content-item",attrs:{name:e.name,phone:e.phone,isDefault:e.isDefault,city:e.city,address:e.address},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.selectHandler(e)},edit:function(n){arguments[0]=n=t.$handleEvent(n),t.gotoEditAddressPage(e)}}})})),1),n("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.gotoAddAddressPage.apply(void 0,arguments)}}},[t._v("添加新地址")])],1)},a=[];n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}))},f507:function(t,e,n){"use strict";n.r(e);var i=n("f335"),r=n("9451");for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);n("17b3");var o,s=n("f0c5"),u=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"1112f3e0",null,!1,i["a"],o);e["default"]=u.exports},f54b:function(t,e,n){"use strict";n.r(e);var i=n("5c4c"),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=r.a}}]);